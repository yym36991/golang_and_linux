
# 1、《redis设计与实现》第2版读书笔记

# 2、数据结构
## 2.1 SDS string
simple dynamic string 动态字符串，和c语言中string不同点是：
- 它有数据结构，维护一个len，和free。当前字符串多长，空闲多长。所以获取长度O(1)
- 扩展：如果扩展之后，sds的长度 < 1MB，会给free一个扩展之后字符串长度的值，备用。如果长度 > 1MB,free会给1MB.
- 空间预分配策略，和惰性空间释放策略。
- 它是二进制安全的 [二进制啥样传进来，就原样传出去，就是安全。不会识别C字符'\0',而导致提前终止]
- 也会在最后追加"\0"，所以可以兼用一些c的string.h库函数。
- 不会出现缓冲区移除，因为会有api来判断。
